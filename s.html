<!DOCTYPE html>
<html lang="uk">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Задачі (Scratch)</title>

<!--========================================================================-->
<style>

body {
  margin: 0;
  padding: 5px;
  text-align: center;
  font-family: sans-serif;
  color: #333333;
  background-color: #f5f4e5;
}

.task-content {
  margin: 5px;
  padding: 2px;
  max-width: 30em;
  line-height: 1.3;
  background-color: #ffffff;
}
@media screen and (min-width:30em) {
  .task-content {margin: 5px 10%}
}

.task-header {
  margin: 0;
  padding: 2px;
  display: flex;
  border-radius: 5px;
  line-height: 2;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  background-color: #8fbc8f;
}

.task-button {
  overflow: hidden;
  margin: 1px;
  padding: 2px 4px;
  width: 35px;
  border: 1px solid #333333;
  border-radius: 5px;
  background: -webkit-linear-gradient(top, #d0ecf4 0%, #5bc9e1 50%, #d0ecf4 100%);
  background: -moz-linear-gradient(top, #d0ecf4 0%, #5bc9e1 50%, #d0ecf4 100%);
  background: -ms-linear-gradient(top, #d0ecf4 0%, #5bc9e1 50%, #d0ecf4 100%);
  background: -o-linear-gradient(top, #d0ecf4 0%, #5bc9e1 50%, #d0ecf4 100%);
  cursor: pointer;
}

select {
  min-width: 120px;
  padding: 2px 5px;
  font-size: 1em;
  border: 2px outset #333333;
  border-radius: 5px;
  background: -webkit-linear-gradient(top, #ffffff 0%, #b0c4de 50%, #ffffff 100%);
  background: -moz-linear-gradient(top, #ffffff 0%, #b0c4de 50%, #ffffff 100%);
  background: -ms-linear-gradient(top, #ffffff 0%, #b0c4de 50%, #ffffff 100%);
  background: -o-linear-gradient(top, #ffffff 0%, #b0c4de 50%, #ffffff 100%);
}

.task-title {padding: 20px 0 10px 0}

.task-number {
  padding-right: 7px;
  font-weight: bold;
}
.task-name {}
.task-container {}

.task-container video {
  max-width: 100%;
  border-radius: 5px;
  border: 1px dotted #333333;
}

.task-comment {
  padding: 10px;
  font-size: 0.8em;
}

</style>

<!--========================================================================-->
<body onload="Start(location.search)">

<div class="task-content" ontouchstart="touchStart()" 
  ontouchend="touchEnd(listBox.selectedIndex)">

  <div class="task-header">
    <div class="task-button" 
      onclick="ShowItem(listBox.selectedIndex - 1)">&#9668;</div>
    <select id="listBox" size="1" 
      onchange="ShowItem(this.selectedIndex)"></select>
    <div class="task-button" 
      onclick="ShowItem(listBox.selectedIndex + 1)">&#9658;</div>
  </div>

  <div class="task-title">
    <span id="taskNumber" class="task-number">№&nbsp;0. </span>
    <span id="taskName" class="task-name">Назва завдання</span>
  </div>
  
  <div class="task-container">
    <video id="taskVideo" controls>
      <source src="" type="video/mp4">Не можна відобразити відео :(
    </video>
  </div>
  <div id="taskComment" class="task-comment">Коментар до завдання</div>

</div>

</body>

<!--========================================================================-->
<script>

//=============================================================================
const MAX_DATA = 200;
const SCRATCH_FOLDER = 'scratch/';
var startX, startY;

//-----------------------------------------------------------------------------
function Start(txt) {
  let s = '';
  for (let i = 0; i < tasks.length; i++) {
    s += '<option>' + (i + 1) + '</option>';
  }
  document.getElementById('listBox').innerHTML = s;
  
  const par = decodeURI(txt).trim().slice(1);
  let n = 0;
  if (par.length > 0 && !isNaN(par) && Number.isInteger(Number(par))) {
    n = Number(par) - 1;
  }
  ShowItem(n);
}

//-----------------------------------------------------------------------------
function ShowItem(n) {
  if (tasks.length === 0) return;
  if (n >= tasks.length) n = tasks.length - 1;
  if (n < 0) n = 0;
  
  document.getElementById('taskNumber').innerHTML = '№&nbsp;' + (n + 1) + '. ';
  if ('name' in tasks[n]) {
    document.getElementById('taskName').innerHTML = tasks[n].name;
  } else {
    document.getElementById('taskName').innerHTML = 'Noname';
  }
  document.getElementById('taskVideo').src = SCRATCH_FOLDER + (n + 1) + '.mp4';
  if ('comment' in tasks[n]) {
    document.getElementById('taskComment').innerHTML = tasks[n].comment;
  } else {
    document.getElementById('taskComment').innerHTML = '';
  }    
  document.getElementById('listBox').selectedIndex = n;
}

//-----------------------------------------------------------------------------
function touchStart() {
  startX = event.touches[0].clientX;
  startY = event.touches[0].clientY;
}
function touchEnd(n) {
  let dX = event.changedTouches[0].clientX - startX;
  let dY = event.changedTouches[0].clientY - startY;
  if (dX > 50 && Math.abs(dX) > Math.abs(dY)) ShowItem(n - 1);
  if (dX < -50 && Math.abs(dX) > Math.abs(dY)) ShowItem(n + 1);
}

//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
const tasks = [
  {name:'На пляжі'},  // 1
  {name:'Діалог'},  // 2
  {name:'Лякалки'},  // 3
  {name:'Переправа'},  // 4
  {name:'Хижаки'},  // 5
  {name:'Футбол'},  // 6
  {name:'Світ тварин'},  // 7
  {name:'Перехід дороги',  // 8
    comment:'Дорогу і «зебру» треба малювати!'},

  {name:'Гімнастика'},  // 9
  {name:'Вартовий'},  // 10
  {name:'Полуниці'},  // 11
  {name:'Квітка',  // 12
    comment:'Кількість пелюсток – будь-яка'},

  {name:'Світлофор'},  // 13
  {name:'Футболіст'},  // 14
  {name:'Вітряки',  // 15
    comment:'Вітряки треба малювати!'},

  {name:'Зоряне небо'},  // 16
  {name:'Заєць-утікач'},  // 17
  {name:'Зустріч'},  // 18
  {name:'Дощ',  // 19
    comment:'Кіт перемішується стрілками ліворуч-праворуч'},

  {name:'Сонце і Земля'},  // 20
  {name:'Жабка на лавці'},  // 21
  {name:'Веселка'},  // 22
  {name:'Титанік'},  // 23
  {name:'Годинник',  // 24
    comment:'Годинник треба малювати!'},

  {name:'Туди-сюди'},  // 25
  {name:'Більярд'},  // 26
  {name:'Серце'},  // 27

  {name:'Прапорець',  // 28
    comment:'(малювання олівцем)'},
  {name:'Слово',  // 29
    comment:'(малювання олівцем)'},

  {name:'Сніжинка',  // 30
    comment:'(циклічне малювання олівцем)'},
  {name:'Зірочки',  // 31
    comment:'(циклічне малювання олівцем)'},
  {name:'Фігура',  // 32
    comment:'(циклічне малювання олівцем)'},
  {name:'Сходинки',  // 33
    comment:'(циклічне малювання олівцем)'},
  {name:'"Зебра"',  // 34
    comment:'(циклічне малювання олівцем)'},

  {name:'Візерунок-1',  // 35
    comment:'(циклічне малювання олівцем)'},
  {name:'Візерунок-2',  // 36
    comment:'(циклічне малювання олівцем)'},
  {name:'Візерунок-3',  // 37
    comment:'(циклічне малювання олівцем)'},

  {name:'Спіраль-1',  // 38
    comment:'(циклічне малювання олівцем)'},
  {name:'Спіраль-2',  // 39
    comment:'(циклічне малювання олівцем)'},
  {name:'Спіраль-3',  // 40
    comment:'(циклічне малювання олівцем)'},
  {name:'Спіраль-4',  // 41
    comment:'(циклічне малювання олівцем)'},

//-----------------------------------------------------------------------------    
  {name:'Перехід дороги - 6кл.',  // 42
    comment:'Світлофор (2&nbsp;образи) треба малювати!'},

  {name:'Екскурсія'},  // 43
  {name:'Космічна подорож',  // 44
    comment:'Ракету треба малювати!'},
  
  {name:'Спритна мишка'},  // 45
  {name:'Парк',  // 46
    comment:'Дерева «виростають» різного розміру і «де&nbsp;захочуть»'},

  {name:'Гральний кубик',  // 47
    comment:`Вкидання грального кубика:<br>
      через певний час випадає число від&nbsp;1 до&nbsp;6`},

  {name:'Зоряне небо - 6кл.',  // 48
    comment:'Зірки різного розміру, кольору та напрямку'},

  {name:'Рулетка',  // 49
    comment:'Рулетку треба малювати!'},

  {name:'Кролик і кавун',  // 50
    comment:`Кавун з’являється «де&nbsp;захоче».<br>
      Кролик намагається її піймати`},

  {name:'Рух по дорозі'},  // 51
  {name:'Серце - 6кл.'},  // 52
  {name:'Шлюз',  // 53
    comment:`Шлюз відкривається, 
      коли кораблик наблизиться на&nbsp;певну відстань`},

  {name:'Мозаїка',  // 54
    comment:'Фігури різного розміру, кольору та напрямку'},

  {name:'Пенальті',  // 55
    comment:'Поле з&nbsp;воротами треба малювати!'},

  {name:'Дощ - 6кл.'},  // 56
  {name:'Втеча Кота-1. Обійти!'},  // 57
  {name:'Втеча Кота-2. Пролізти!'},  // 58
  {name:'Втеча Кота-3. Прокласти шлях!'},  // 59
  {name:'Втеча Кота-4. Відплисти!'},  // 60
  {name:'Клони'},  // 61
  {name:'Намисто',  // 62
    comment:`Зобразіть не шестикутник,
      <br>а квадрат або п’ятикутник`},

  {name:'Таймер',  // 63
    comment:'Домалюйте кнопку, яка запускає таймер'},

  {name:'Шахівниця'},  // 64
  {name:'Квіткове поле',  // 65
    comment:`Квітки з’являються «де&nbsp;захочуть»,<br>
      різних&nbsp;кольорів та різного&nbsp;розміру`},

  {name:'НЛО'},  // 66
  {name:'Ліфт'},  // 67
  {name:'ППО'},  // 68
]

//-----------------------------------------------------------------------------
</script>